# Unity开发规范
## 目录
-------------------
* [命名](#命名)
* [代码](#代码)
* [框架](#框架)
* [Entitas](#Entitas)



命名
-------------------------
- 自己开发的目录名以下划线开头，譬如 "_Scripts", "_Prefabs"等，以便他们能排在最顶部,首字母大写
- Hierarchy中的GameObject(包括UI)、文件名都使用单词或拼音首字母大写，最好不使用"_",空格等特殊字符

其它
----------------------
- Unity中使用的文件，改名、改目录必须在Unity内操作。meta文件必须提交。在SVN提交时，删除的文件(missing)要右键从SVN中delete再提交



代码
------------------------
- 代码用C#，别用JS, 必要的话用namespace将自己的代码括起来
- C#的注释要认真写，打///就能帮你补全
- 每个程序文件开头要用一段注释写修改Log
- Unity的脚本逻辑
 - 比较独立的,譬如爆炸之后1秒钟消失，这种单独写个脚本绑定到目标上即可
 - 与其它的脚本进行交互
    + 调用的频率不高的可使用SendMessage,性能略差
    + 通过对象的实例去调用
  - GlobalManager.cs来控制游戏的全局变量及全局方法，比如角色的金币数量等
  - GameController.cs来控制当前关的游戏进程。单实例模式。游戏的主循环也是用它控制。初始化等等。
  - InputController.cs来控制所有的用户输入。单实例模式。鼠标、键盘、触摸屏
  - 其它的类似菜单控制器，声音控制器，成就控制器，IAP虚拟道具控制器等等，也是采用类似的方法管理。
- 命名
  - Public遵循Pascal命名法， 某个函数或变量需要被外部调用时大写字母开头
  - Protected,private遵循驼峰命名法，即单词首字母小写，其余大写
- 关于PlayerPref的操作，统一写成静态类的get/set模式，程序中哪里要用则直接读写
- prefab资源尽量设计简单，最好拖入场景就能用，或简单设置。
- 数据行为与逻辑表现分离，即V与MC的分离，换句话说多写class少写MonoBehavior
- 善用Coroutine

框架
------------------------------
+ 单例模板 使用ZSingleton<T>
+ 需要使用Unity生命周期的单例模式 ZMonoSingleton<T>
+ 有限状态机 FSM
+ 常量定义APPConst.cs
+ 输出Log使用ZDebug.Log,Release输出需要注册类型

Entitas
-------------------------
[Entitas-CSharp](https://github.com/sschmid/Entitas-CSharp/wiki/Overview)框架
+ OverView
 - Entity
 - Pool
 - Group
 - Group Observer
+ System
 - IInitializeSystem
 - IExecuteSystem
 - IReactiveSystem
+ Component Attributes
 - [Pool]
 - [SingleEntity]
 - [CustomPrefix]
 - [CustomComponentName]
 - DontGenerate]'
+ Matcher<br/>
Matchers are generated by the code generator and can be combined. Matchers are usually used to get groups of entities from the pool.
+ Group<br/>
```
pool.GetGroup(Matcher.AllOf(Matcher.Move, Matcher.Position))
pool.GetGroup(Matcher.Position).OnEntityAdded += (group, entity, index, component) => {
    // Do something
};
```
+ Group Observer
```
var group = pool.GetGroup(Matcher.Position);
var observer = group.CreateObserver(GroupEventType.OnEntityAdded);
foreach (var e in observer.collectedEntities) {
    // do something with all the entities
    // that have been collected to this point of time
}
observer.ClearCollectedEntities();
observer.Deactivate(); //To stop observing
```
